<script lang="ts">
  import { Iterables } from "$lib/ext/stdlib/Iterables"

  const themeColorWheel = Iterables.cycle("#38b951", "#ff7654", "#f37aaf", "#9facbd", "#00aaff")

  function cycleTheme(): void {
    document.documentElement.style.setProperty(
      "--theme-primary-color",
      themeColorWheel.next().value,
    )
  }
</script>

<header>
  <div class="left-section">
    <a class="logo-link" href="/" aria-label="CK logo link">
      <svg class="logo" viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
        <path
          transform="translate(-151.2 -45.947)"
          d="m172.79 68.286c-2.4747 0-4.7517 0.38434-6.8281 1.1523-2.048 0.768-3.8245 1.8484-5.332 3.2422-1.5076 1.3938-2.6751 3.0289-3.5 4.9062-0.79644 1.8773-1.1934 3.9259-1.1934 6.1445 0 2.1902 0.41144 4.2242 1.2363 6.1016s1.9779 3.4979 3.457 4.8633c0.02977 0.026959 0.06182 0.051399 0.0918 0.078125 0.28853 0.31823 0.58924 0.62745 0.9082 0.92188 0.02977 0.026959 0.06182 0.051399 0.0918 0.078125 0.28853 0.31823 0.58924 0.62745 0.9082 0.92188 0.02977 0.026959 0.06182 0.051399 0.0918 0.078125 0.28853 0.31823 0.58924 0.62745 0.9082 0.92188 0.02977 0.026959 0.06182 0.051399 0.0918 0.078125 0.28853 0.31823 0.58924 0.62745 0.9082 0.92188 0.02977 0.026959 0.06182 0.051399 0.0918 0.078125 0.28853 0.31823 0.58924 0.62745 0.9082 0.92188 1.5076 1.3653 3.284 2.4332 5.332 3.2012 2.0764 0.73956 4.3535 1.1094 6.8281 1.1094 1.6213 0 3.1422-0.17038 4.5644-0.51171 1.4507-0.36978 2.8012-0.86837 4.0527-1.4942 1.2516-0.65421 2.361-1.4355 3.3281-2.3457l-0.55469-0.76953c-0.93866 0.88178-1.99 1.6359-3.1562 2.2617-1.1662 0.59733-2.4461 1.0669-3.8398 1.4082-1.3653 0.34133-2.8156 0.51172-4.3516 0.51172-0.66939 0-1.3185-0.03713-1.9551-0.0957 0.30406 0.01163 0.60178 0.03515 0.91211 0.03515 1.6213 0 3.1422-0.17038 4.5644-0.51171 1.4507-0.36978 2.8012-0.86837 4.0527-1.4942 1.2516-0.65421 2.361-1.4355 3.3281-2.3457l-0.55469-0.76953c-0.93866 0.88178-1.99 1.6359-3.1562 2.2617-1.1662 0.59733-2.4461 1.0669-3.8398 1.4082-1.3653 0.34133-2.8156 0.51172-4.3516 0.51172-0.66939 0-1.3185-0.03713-1.9551-0.0957 0.30406 0.01163 0.60178 0.03515 0.91211 0.03515 1.6213 0 3.1422-0.17038 4.5644-0.51171 1.4507-0.36978 2.8012-0.86837 4.0527-1.4942 1.2516-0.65422 2.361-1.4355 3.3281-2.3457l-0.55469-0.76953c-0.93866 0.88178-1.99 1.6359-3.1562 2.2617-1.1662 0.59733-2.4461 1.0669-3.8398 1.4082-1.3653 0.34133-2.8156 0.51172-4.3516 0.51172-0.66939 0-1.3185-0.03713-1.9551-0.0957 0.30406 0.01163 0.60178 0.03515 0.91211 0.03515 1.6213 0 3.1422-0.17038 4.5644-0.51171 1.4507-0.36978 2.8012-0.86837 4.0527-1.4941 1.2516-0.65422 2.361-1.4355 3.3281-2.3457l-0.55469-0.76953c-0.93866 0.88178-1.99 1.6359-3.1562 2.2617-1.1662 0.59733-2.4461 1.0669-3.8398 1.4082-1.3653 0.34133-2.8156 0.51172-4.3516 0.51172-0.66939 0-1.3185-0.03713-1.9551-0.095702 0.30406 0.01163 0.60178 0.035152 0.91211 0.035152 1.6213 0 3.1422-0.17038 4.5644-0.51172 1.4507-0.36978 2.8012-0.86836 4.0527-1.4941 1.2516-0.65422 2.361-1.4355 3.3281-2.3457l-0.55469-0.76953c-0.93866 0.88178-1.99 1.6359-3.1562 2.2617-1.1662 0.59733-2.4461 1.0669-3.8398 1.4082-1.3653 0.34133-2.8156 0.51172-4.3516 0.51172-0.66939 0-1.3185-0.037134-1.9551-0.095703 0.30406 0.01163 0.60178 0.035156 0.91211 0.035156 1.6213 0 3.1422-0.17039 4.5644-0.51172 1.4507-0.36978 2.8012-0.86836 4.0527-1.4941 1.2516-0.65422 2.361-1.4355 3.3281-2.3457l-0.55469-0.76953c-0.93866 0.88178-1.99 1.6359-3.1562 2.2617-1.1662 0.59733-2.4461 1.0669-3.8398 1.4082-1.3653 0.34133-2.8156 0.51172-4.3516 0.51172-2.3324 0-4.4662-0.35529-6.4004-1.0664-0.96141-0.35346-1.8585-0.77748-2.6934-1.2715-0.24292-0.41352-0.46745-0.84015-0.66993-1.2812-0.76799-1.7351-1.1523-3.6404-1.1523-5.7168s0.38435-3.9962 1.1523-5.7598c0.79645-1.7636 1.9059-3.299 3.3281-4.6074s3.1009-2.3182 5.0352-3.0293c1.9342-0.73956 4.0679-1.1094 6.4004-1.1094 1.6213 0 3.1422 0.19943 4.5644 0.59766 1.4507 0.39822 2.7866 0.951 4.0098 1.6621 1.2231 0.71111 2.3055 1.565 3.2441 2.5605l0.46875-0.89648c-0.32793-0.32792-0.67638-0.63458-1.0352-0.93164l0.03516-0.068359c-0.32793-0.32792-0.67638-0.63458-1.0352-0.93164l0.03516-0.068359c-0.32793-0.32792-0.67638-0.63458-1.0352-0.93164l0.03516-0.068359c-0.32793-0.32792-0.67638-0.63458-1.0352-0.93164l0.03516-0.068359c-0.32793-0.32792-0.67638-0.63458-1.0352-0.93164l0.03516-0.068359c-0.99556-0.99556-2.1341-1.8475-3.4141-2.5586-1.2516-0.71111-2.6311-1.2658-4.1387-1.6641-1.4791-0.42667-3.0707-0.64062-4.7773-0.64062zm23.295 0.42773v29.865h0.93945v-9.6973l0.06055-0.050781v10.748h0.93945v-9.6973l0.06055-0.050781v10.748h0.93945v-9.6973l0.06055-0.050781v10.748h0.93945v-9.6973l0.06055-0.050781v10.748h0.93945v-9.6973l0.06055-0.050781v10.748h0.93945v-9.6973l8.582-7.2734 9.6289 11.971h0.19531l0.80469 1h0.19531l0.80469 1h0.19531l0.80469 1h0.19531l0.80469 1h0.19531l0.80469 1h1.2363l-14.545-18.086 13.906-11.779h-1.4082l-13.186 11.168-0.3125-0.38867 13.906-11.779h-1.4082l-13.186 11.168-0.3125-0.38867 13.906-11.779h-1.4082l-13.186 11.168-0.3125-0.38867 13.906-11.779h-1.4082l-13.186 11.168-0.3125-0.38867 13.906-11.779h-1.4082l-13.186 11.168-0.3125-0.38867 13.906-11.779h-1.4082l-17.4 14.738v-9.7383h-0.93945v10.533l-0.06055 0.050782v-11.584h-0.93945v12.381l-0.06055 0.050781v-13.432h-0.93945v14.227l-0.06055 0.052734v-15.279h-0.93945v16.074l-0.06055 0.050781v-17.125h-0.93945v17.922l-0.06055 0.050781v-18.973h-0.93945zm-23.252 0.51172c0.57795 0 1.1388 0.033382 1.6914 0.083984-0.24425-0.00909-0.48527-0.023437-0.73437-0.023437-2.4747 0-4.7517 0.38434-6.8281 1.1523-2.048 0.768-3.8245 1.8484-5.332 3.2422-1.5076 1.3938-2.6751 3.0289-3.5 4.9062-0.77757 1.8328-1.171 3.8301-1.1894 5.9883-0.01441-0.27804-0.02344-0.5593-0.02344-0.84375 0-2.0764 0.38435-3.9962 1.1523-5.7598 0.79645-1.7636 1.9059-3.299 3.3281-4.6074s3.1009-2.3182 5.0352-3.0293c1.9342-0.73956 4.0679-1.1094 6.4004-1.1094zm1 1c0.57795 0 1.1388 0.033382 1.6914 0.083984-0.24425-0.00909-0.48527-0.023437-0.73437-0.023437-2.4747 0-4.7517 0.38434-6.8281 1.1523-2.048 0.768-3.8245 1.8484-5.332 3.2422-1.5076 1.3938-2.6751 3.0289-3.5 4.9062-0.77757 1.8328-1.171 3.8301-1.1894 5.9883-0.01441-0.27804-0.02344-0.5593-0.02344-0.84375 0-2.0764 0.38435-3.9962 1.1523-5.7598 0.79645-1.7636 1.9059-3.299 3.3281-4.6074s3.1009-2.3182 5.0352-3.0293c1.9342-0.73956 4.0679-1.1094 6.4004-1.1094zm1 1c0.57756 0 1.1372 0.03345 1.6894 0.083984-0.24362-0.009041-0.48398-0.023437-0.73242-0.023437-2.4747 0-4.7517 0.38434-6.8281 1.1523-2.048 0.768-3.8245 1.8484-5.332 3.2422-1.5076 1.3938-2.6751 3.0289-3.5 4.9062-0.77757 1.8328-1.171 3.8301-1.1894 5.9883-0.01441-0.27804-0.02344-0.5593-0.02344-0.84375 0-2.0764 0.38435-3.9962 1.1523-5.7598 0.79645-1.7636 1.9059-3.299 3.3281-4.6074s3.1009-2.3182 5.0352-3.0293c1.9342-0.73956 4.0679-1.1094 6.4004-1.1094zm1 1c0.57795 0 1.1388 0.033382 1.6914 0.083984-0.24425-0.00909-0.48527-0.023437-0.73437-0.023437-2.4747 0-4.7517 0.38434-6.8281 1.1523-2.048 0.768-3.8245 1.8484-5.332 3.2422-1.5076 1.3938-2.6751 3.0289-3.5 4.9062-0.77757 1.8328-1.171 3.8301-1.1894 5.9883-0.01441-0.27804-0.02344-0.5593-0.02344-0.84375 0-2.0764 0.38435-3.9962 1.1523-5.7598 0.79645-1.7636 1.9059-3.299 3.3281-4.6074s3.1009-2.3182 5.0352-3.0293c1.9342-0.73956 4.0679-1.1094 6.4004-1.1094zm1 1c0.57756 0 1.1372 0.03345 1.6894 0.083984-0.24362-0.009041-0.48398-0.023437-0.73242-0.023437-2.4747 0-4.7517 0.38434-6.8281 1.1523-2.048 0.768-3.8245 1.8484-5.332 3.2422-1.5076 1.3938-2.6751 3.0289-3.5 4.9062-0.77757 1.8328-1.171 3.8301-1.1894 5.9883-0.01441-0.27804-0.02344-0.5593-0.02344-0.84375 0-2.0764 0.38435-3.9962 1.1523-5.7598 0.79645-1.7636 1.9059-3.299 3.3281-4.6074s3.1009-2.3182 5.0352-3.0293c1.9342-0.73956 4.0679-1.1094 6.4004-1.1094zm29.357 7.8926 0.3125 0.38672-4.4785 3.793v-0.65039l4.166-3.5293zm0.88281 1.0977 0.3125 0.38867-5.3613 4.541v-0.65234l5.0488-4.2773zm0.88281 1.0977 0.3125 0.38867-6.2441 5.291v-0.65234l5.9316-5.0273zm0.88477 1.0977 0.3125 0.38867-7.1289 6.0391v-0.65039l6.8164-5.7773zm-7.7559 1.0312v0.65234l-0.06055 0.050781v-0.65234l0.06055-0.050781zm8.6387 0.066406 0.3125 0.39062-8.0117 6.7871v-0.65234l7.6992-6.5254zm-9.6387 0.78125v0.65039l-0.06055 0.052734v-0.65234l0.06055-0.050781zm-1 0.8457v0.65234l-0.06055 0.050781v-0.65039l0.06055-0.052735zm2 0.1543v0.65039l-0.06055 0.052734v-0.65234l0.06055-0.050781zm-3 0.69336v0.65234l-0.06055 0.050781v-0.65234l0.06055-0.050782zm2 0.15234v0.65234l-0.06055 0.050781v-0.65039l0.06055-0.052735zm-1 0.84766v0.65234l-0.06055 0.050781v-0.65234l0.06055-0.050782zm2 0.15234v0.65234l-0.06055 0.050781v-0.65039l0.06055-0.052735zm-1 0.84766v0.65234l-0.06055 0.050781v-0.65234l0.06055-0.050782zm1 1v0.65234l-0.06055 0.050781v-0.65234l0.06055-0.050782z"
          stroke-linejoin="round"
          stroke-width="9"
          stroke="#000000"
        />
        <path
          d="m21.585 53.06q-3.712 0-6.8267-1.1093-3.072-1.152-5.3334-3.2-2.2187-2.048-3.456-4.864-1.2373-2.816-1.2373-6.1014 0-3.328 1.1947-6.144 1.2373-2.816 3.4987-4.9067t5.3334-3.2427q3.1147-1.152 6.8267-1.152 2.56 0 4.7787 0.64 2.2613 0.59734 4.1387 1.664 1.92 1.0667 3.4133 2.56l-0.46934 0.896q-1.408-1.4933-3.2427-2.56-1.8347-1.0667-4.0107-1.664-2.1333-0.59734-4.5653-0.59734-3.4987 0-6.4 1.1093-2.9013 1.0667-5.0347 3.0293-2.1333 1.9627-3.328 4.608-1.152 2.6453-1.152 5.76 0 3.1147 1.152 5.7174 1.1947 2.6027 3.328 4.5653 2.1333 1.92 5.0347 2.9867 2.9013 1.0667 6.4 1.0667 2.304 0 4.352-0.512 2.0907-0.512 3.84-1.408 1.7493-0.93867 3.1573-2.2613l0.55467 0.768q-1.4507 1.3653-3.328 2.3467-1.8773 0.93867-4.0533 1.4933-2.1333 0.512-4.5653 0.512zm23.765-9.728v-1.1947l22.869-19.371h1.408zm-0.46933 9.3014v-29.867h0.93867v29.867zm24.149 0-14.208-17.664 0.72534-0.64 14.72 18.304z"
          stroke-linejoin="round"
          stroke-width="5"
          stroke="currentColor"
        />
      </svg>
    </a>
  </div>
  <div class="right-section">
    <a
      class="github-profile-link header-button"
      href="https://github.com/ckant"
      target="_blank"
      rel="noopener"
      aria-label="Go to GitHub profile"
    >
      <svg
        class="github-icon header-button-icon"
        viewBox="0 0 16 16"
        xmlns="http://www.w3.org/2000/svg"
      >
        <!-- [Octicons](primer.style/octicons) | [License: MIT](github.com/primer/octicons/blob/main/LICENSE) -->
        <path
          fill="currentColor"
          d="M8 0c4.42 0 8 3.58 8 8a8.01 8.01 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38c0-.27.01-1.13.01-2.2c0-.75-.25-1.23-.54-1.48c1.78-.2 3.65-.88 3.65-3.95c0-.88-.31-1.59-.82-2.15c.08-.2.36-1.02-.08-2.12c0 0-.67-.22-2.2.82c-.64-.18-1.32-.27-2-.27s-1.36.09-2 .27c-1.53-1.03-2.2-.82-2.2-.82c-.44 1.1-.16 1.92-.08 2.12c-.51.56-.82 1.28-.82 2.15c0 3.06 1.86 3.75 3.64 3.95c-.23.2-.44.55-.51 1.07c-.46.21-1.61.55-2.33-.66c-.15-.24-.6-.83-1.23-.82c-.67.01-.27.38.01.53c.34.19.73.9.82 1.13c.16.45.68 1.31 2.69.94c0 .67.01 1.3.01 1.49c0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8"
        />
      </svg>
    </a>
    <a
      class="linkedin-profile-link header-button"
      href="https://linkedin.com/in/chris-kant"
      target="_blank"
      rel="noopener"
      aria-label="Go to LinkedIn profile"
    >
      <!-- [Akar Icons](akaricons.com) | [License: MIT](github.com/artcoholic/akar-icons-app/blob/main/LICENSE) -->
      <svg
        class="linkedin-icon header-button-icon"
        xmlns="http://www.w3.org/2000/svg"
        width="36"
        height="36"
        viewBox="0 0 24 24"
        fill="currentColor"
        stroke-width="2"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M9.429 8.969h3.714v1.85c.535-1.064 1.907-2.02 3.968-2.02 3.951 0 4.889 2.118 4.889 6.004V22h-4v-6.312c0-2.213-.535-3.461-1.897-3.461-1.889 0-2.674 1.345-2.674 3.46V22h-4V8.969zM2.57 21.83h4V8.799h-4V21.83zM7.143 4.55a2.53 2.53 0 0 1-.753 1.802A2.573 2.573 0 0 1 4.57 7.1a2.59 2.59 0 0 1-1.818-.747A2.548 2.548 0 0 1 2 4.55c0-.677.27-1.325.753-1.803A2.583 2.583 0 0 1 4.571 2c.682 0 1.336.269 1.819.747.482.478.753 1.126.753 1.803z"
        />
      </svg>
    </a>
    <button class="theme-switcher-button header-button" onclick={cycleTheme} title="Switch theme">
      <svg
        class="theme-switcher-icon header-button-icon"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 256 256"
      >
        <!-- [Phosphor Icons](phosphoricons.com) | [License: MIT](github.com/phosphor-icons/core/blob/main/LICENSE) -->
        <rect width="256" height="256" fill="none" />
        <path
          d="M208,144c0-72-80-128-80-128S48,72,48,144a80,80,0,0,0,160,0Z"
          fill="#000000"
          stroke="#000000"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="16"
        />
        <path
          d="M136,192c20-3.37,36.61-20,40-40"
          fill="none"
          stroke="#ffffff"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="16"
        />
      </svg>
    </button>
  </div>
</header>

<style>
  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: var(--thick-border);
    background-color: var(--secondary-bg-color);
    padding: 0 1rem;
    width: 100%;
    height: 100%;
  }

  .logo-link {
    display: flex;
    align-items: center;
    justify-items: center;
    aspect-ratio: 1;
    height: 100%;
  }

  .left-section {
    height: 100%;
  }

  .logo {
    aspect-ratio: 1;
    height: 100%;
    color: var(--logo-color);
  }

  .right-section {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 0.75rem;
    height: 100%;
  }

  .header-button {
    display: flex;
    position: relative;
    justify-content: center;
    align-items: center;
    cursor: pointer;

    box-shadow: var(--box-shadow);
    border: var(--normal-border);
    border-radius: var(--border-radius);
    background-color: var(--icon-bg-color);
    aspect-ratio: 1;
    height: 2.25rem;

    &:after {
      position: absolute;
      top: calc(0rem - var(--normal-border-size));
      left: calc(0rem - var(--normal-border-size));
      width: calc(100% + var(--normal-box-outline-size));
      height: calc(100% + var(--normal-box-outline-size));
      content: "";
    }

    @media (hover) {
      &:hover {
        translate: var(--box-shadow-translate);
        box-shadow: none;

        &:after {
          translate: var(--box-shadow-untranslate);
        }
      }
    }
  }

  .header-button-icon {
    aspect-ratio: 1;
    width: 1.2rem;
    color: var(--icon-color);
  }

  .theme-switcher-button {
    touch-action: manipulation;
  }
</style>
